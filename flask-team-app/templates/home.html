<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Task Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  </head>

  <body>
    <div class="container">
      <!-- Top Nav -->
      <div class="nav">
        <div class="brand">
          <img
            class="logo"
            src="{{ url_for('static', filename='nsc-logo.svg') }}"
            alt="App Logo"
          />
          <div>
            Task Tracker<br />
            <span style="color:var(--muted); font-weight:500; font-size:12px;">
              Simple productivity web app
            </span>
          </div>
        </div>

        <div class="pill">IT111 Group Project</div>
      </div>

      <!-- Compact header -->
      <div class="card">
        <div class="cardBody" style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
          <div>
            <div style="font-weight:800; font-size:18px;">Dashboard</div>
            <div style="color:var(--muted); font-size:13px;">
              Desktop: fixed app layout. Mobile: page scrolls naturally.
            </div>
          </div>

          <div class="stats">
            <span class="pill">Total: <b style="color:var(--text)">{{ total }}</b></span>
            <span class="pill">Complete: <b style="color:var(--text)">{{ complete }}</b></span>
            <span class="pill">Incomplete: <b style="color:var(--text)">{{ incomplete }}</b></span>
          </div>
        </div>
      </div>

      <!-- Main layout -->
      <div class="main">
        <!-- Tasks panel -->
        <div class="card">
          <div class="cardHeader">
            <div style="font-weight:700;">Your Tasks</div>
            <div class="pill">Home</div>
          </div>

          <!-- ‚úÖ Scroll happens here (inside the tasks panel) -->
          <div class="cardBody scrollArea">
            <form method="POST" action="/tasks/add" style="display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px;">
              <input name="title" placeholder="Task title..." required
                     style="flex:1; min-width:220px; padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text);" />
              <input name="memo" placeholder="Optional memo..."
                     style="flex:2; min-width:260px; padding:10px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:rgba(255,255,255,.04); color:var(--text);" />
              <button class="pill" type="submit" style="border:none;">Add</button>
            </form>

            {% if tasks and tasks|length > 0 %}
              {% for task in tasks %}
                <div class="task">
                  <div>
                    <p class="taskTitle">{{ task.title }}</p>
                    {% if task.memo %}
                      <p class="taskMemo">{{ task.memo }}</p>
                    {% else %}
                      <p class="taskMemo"><em>No notes.</em></p>
                    {% endif %}
                  </div>

                  <div>
                    {% if task.status == "complete" %}
                      <span class="badge complete">Complete</span>
                    {% else %}
                      <span class="badge incomplete">Incomplete</span>
                    {% endif %}

                    <div class="taskActions">
                      <a class="pill" href="/tasks/{{ task.id }}" style="text-decoration:none;">View</a>

                      <form method="POST" action="/tasks/{{ task.id }}/toggle" style="margin:0;">
                        <button class="pill" type="submit" style="border:none;">Toggle</button>
                      </form>

                      <form method="POST" action="/tasks/{{ task.id }}/delete" style="margin:0;" onsubmit="return confirm('Delete this task?');">
                        <button class="pill" type="submit" style="border:none;">Delete</button>
                      </form>
                    </div>
                  </div>
                </div>
              {% endfor %}
            {% else %}
              <div class="empty">
                <b>No tasks yet.</b><br/>
                Add a few tasks to get started.
              </div>
            {% endif %}
          </div>
        </div>

        <!-- Right panel -->
        <div class="card">
          <div class="cardHeader">
            <div style="font-weight:700;">Quick Info</div>
            <div class="pill">MVP</div>
          </div>

          <div class="cardBody">
            <p style="margin:0 0 10px 0; color:var(--muted); line-height:1.5;">
              This app loads tasks from <code>data/tasks.json</code>. Next steps: add tasks, toggle complete, delete.
            </p>

            <div class="pill">‚úÖ View tasks (US1)</div>
            <div style="height:10px"></div>
            <div class="pill">üß© Add task (US2)</div>
            <div style="height:10px"></div>
            <div class="pill">üîÅ Toggle (US3)</div>
            <div style="height:10px"></div>
            <div class="pill">üóë Delete (US4)</div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
